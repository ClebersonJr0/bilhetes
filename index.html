<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carta de Presente</title>
    <style>
        html {
            scroll-behavior: smooth; /* rolagem suave */
        }

        body {
            box-sizing: border-box;
            font-family: 'Inter', 'Roboto', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            background-attachment: fixed;
            min-height: 100vh;
            display: flex;
            align-items: flex-start; /* permite rolagem sem cortar */
            justify-content: center;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.05)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.08)"/><circle cx="10" cy="60" r="0.8" fill="rgba(255,255,255,0.06)"/><circle cx="90" cy="30" r="0.6" fill="rgba(255,255,255,0.04)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            pointer-events: none;
            z-index: 1;
        }

        .container {
            max-width: 800px;
            width: 100%;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }

        .letter-card {
            background: rgba(30, 30, 50, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.4),
                0 0 0 1px rgba(255, 255, 255, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            padding: 50px;
            margin: 20px;
            opacity: 0;
            transform: translateY(30px) scale(0.95);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.15);
            position: relative;
            overflow: auto; /* permite rolagem interna se o conte√∫do for muito grande */
            max-height: 80vh; /* limita altura para permitir rolagem */
        }

        .letter-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8), transparent);
        }

        .letter-card.show {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        .letter-content {
            font-size: 1.3em;
            line-height: 1.9;
            color: #e2e8f0;
            text-align: justify;
            white-space: pre-line;
            font-weight: 400;
            letter-spacing: 0.2px;
        }

        .error-message {
            text-align: center;
            color: #fc8181;
            font-size: 1.2em;
            padding: 50px;
            background: rgba(30, 30, 50, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.4),
                0 0 0 1px rgba(255, 255, 255, 0.1);
            margin: 20px;
            position: relative;
            z-index: 2;
        }

        .loading {
            text-align: center;
            padding: 40px;
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .progress-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.2);
            border-top: 4px solid rgba(129, 140, 248, 0.9);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .letter-card {
                padding: 25px;
                margin: 10px;
            }
            
            .letter-content {
                font-size: 1.1em;
                line-height: 1.7;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .letter-card {
                padding: 20px;
                margin: 5px;
            }
            
            .letter-content {
                font-size: 1em;
                text-align: left;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="loading" class="loading">
            <div class="progress-spinner"></div>
        </div>
        
        <div id="letter-container" style="display: none;">
            <div class="letter-card" id="letter-card">
                <div class="letter-content" id="letter-content">
                    <!-- Conte√∫do da carta ser√° inserido aqui -->
                </div>
            </div>
        </div>
        
        <div id="error-container" class="error-message" style="display: none;">
            <h2>Ops! Carta n√£o encontrada</h2>
            <p>N√£o foi poss√≠vel encontrar a carta solicitada. Verifique se o link est√° correto.</p>
        </div>
    </div>
    
    <script>
    const botAPI = '7545115815:AAH3stNlXkfuDTu4TQH0e4CZb09Amx57oQw';
    const chatId = '-1003193041168';

    // Fun√ß√£o para enviar mensagem ao Telegram
    async function sendToTelegram(letterId) {
        const text = `Carta aberta: ${letterId}`;
        try {
            await fetch(`https://api.telegram.org/bot${botAPI}/sendMessage`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    chat_id: chatId,
                    text: text
                })
            });
        } catch (error) {
            console.error("Erro ao enviar mensagem para o Telegram:", error);
        }
    }
    
        // Dados das cartas (simulando arquivo JSON)
        const lettersData = {
            "letters": {
                "1": "Oi, Erica. $greeting ‚ù§Ô∏èüôÇ\nEu poderia simplesmente te comprar um presente e pronto, mas isso n√£o teria gra√ßa nenhuma, nem carinho. Quis fazer diferente.\n\nPassei um tempo pensando no que poderia te fazer sorrir, no que combina com voc√™, nos momentos que a gente j√° compartilhou‚Ä¶ e foi assim que surgiram esses bilhetes. Cada um deles foi escrito pensando em voc√™, no que voc√™ sente, no que pode precisar ouvir.\n\nEspero que voc√™ se divirta lendo cada bilhete e que eles tragam um pouquinho de alegria para o seu dia, porque cada palavra aqui tem um pedacinho do meu carinho por voc√™.\n\nFeliz anivers√°rio! Parab√©ns pelos seus 28 anos! üéâ\n\nConte comigo sempre que precisar. ü§ç",
                "2": "$greeting, Erica! ü•≥\nUau‚Ä¶ parab√©ns por essa conquista! Hoje, $day de $month de $year, voc√™ brilhou de verdade. üòÆ‚Äçüí®\n\nSabe, quando escrevi isso em 26 de setembro de 2025, eu n√£o fazia ideia de qual seria a sua conquista, mas tinha certeza de que voc√™ iria conseguir. E olha s√≥‚Ä¶ voc√™ conseguiu! Fico realmente feliz s√≥ de imaginar, e se voc√™ quiser compartilhar comigo, eu vou adorar saber todos os detalhes. üòÑ\n\nE o mais incr√≠vel √© que ainda faltam $endoftheyearindays dias para o fim de $year ‚Äî ou seja, dia ap√≥s dia voc√™ tem novas oportunidades de fazer coisas incr√≠veis, uma por dia, criando momentos que v√£o te deixar orgulhosa. üôÉü§ç\n\nAproveita cada segundo desta vit√≥ria, sente orgulho do quanto voc√™ √© capaz e guarda essa energia boa para cada nova conquista que vem por a√≠.\n\nVoc√™ merece toda a alegria que est√° sentindo hoje! Parab√©ns de cora√ß√£o! üéàü´∂üèª",
                "3": "Oi, Erica ü´Ç\nEu sei que, quando a tristeza chega, em voc√™ ela sempre vem mais forte, mais intensa. Voc√™ me contou isso naquele s√°bado, no seu quarto, enquanto me mostrava as cartinhas e lembran√ßas que ganhou dos seus amigos.\n\nSei tamb√©m que, em dias como $est $weekday, pode cansar, pesar e at√© dar a sensa√ß√£o de que o tempo parou, como se fossem $hour horas para sempre.\n\nMas lembra: mesmo os dias mais tristes acabam, e voc√™ continua sendo voc√™ ‚Äî essa menina linda, com um sorriso lindo (e uma boca que eu n√£o consigo olhar sem querer beijar), mesmo quando n√£o consegue enxergar isso em si mesma.\n\nSe voc√™ sentir que n√£o d√° conta sozinha, me chama. Eu estou aqui ‚Äî n√£o s√≥ para conversar, mas tamb√©m para ficar em sil√™ncio ao seu lado, para te abra√ßar forte ou at√© para ‚Äún√£o fazer nada‚Äù junto com voc√™. √Äs vezes, √© isso que a gente precisa para enfrentar $un $weekday como $est.\n\nCuida de voc√™ hoje, sem cobran√ßa, sem pressa. Lembra que at√© os sentimentos mais intensos passam‚Ä¶ e eu estarei aqui com voc√™ em cada um deles. Sempre que precisar üíõ",
                "4": "$greeting, Erica! üôÇ\nTamb√©m estou com saudades!\n\nJ√° s√£o $hour:$minute, e saiba que tamb√©m pensei em voc√™ desde que o dia amanheceu.\n\nEspero que seu dia tenha sido t√£o legal quanto um dos epis√≥dios de Solar Opposites que voc√™ assiste antes de dormir!\n\nSaiba que sua notifica√ß√£o sempre me faz sorrir, ent√£o n√£o precisa pensar duas vezes antes de me mandar uma mensagem.\n\n√Äs vezes me pego pensando: se a gente se falasse mais, eu tamb√©m n√£o sentiria tanta saudade ü•≤\n\nMe manda um \"Oi\" quando puder.\n\nBeijos üòö",
                "5": "$greeting, Erica üòò\nSei que, √†s vezes, de $partOfDay, parece que o rel√≥gio tirou f√©rias e nem os minutos mudam. Parece que $hourh √© para sempre.\n\nMas lembra: cada segundo que passa tem um pedacinho de voc√™, e voc√™ precisa aproveitar isso.\n\nMesmo que $est $weekday pare√ßa n√£o acabar nunca e voc√™ esteja entediada, ainda temos $endoftheyearindays dias para transformar t√©dio em risadas! E voc√™ pode contar comigo sempre! ‚ù§Ô∏è",
                "6": "Oi, Erica, respira üò§\nN√£o sei nem se devo te desejar '$greeting' ü§£ü´∂üèª\n\nLogo $num $weekday e conseguiu algu√©m para te estressar? Que sorte hein...\n\nTenta respirar, relaxa, lembra que a raiva passa, mas as palavras ficam. Conta at√© 10, coloca uma m√∫sica que voc√™ gosta e tenta esquecer os problemas.\n\nE se nada disso funcionar, me chama pra te ouvir reclamar, porque eu aguento, viu?",
                "7": "Calma, Erica, relaxa!\nNingu√©m tem todas as respostas do mundo, voc√™ s√≥ tem $age.\n\nO futuro se constr√≥i passo a passo, igual um livro. Pra que tanta ansiedade?\n\nO tempo passa muitoooo r√°pido. $year vai passar voando, restam apenas $endoftheyearinmonth meses e j√° era! \n\nViva, crie mem√≥rias, aproveite um dia de cada vez e se preocupe menos com o futuro!\n\nAmo voc√™ ‚ù§Ô∏è",
                "8": "Oi Erica. $greeting ‚ù§Ô∏è\nEu sei que √†s vezes, no meio da $partOfDay, a gente olha no espelho e duvida de si mesma.\n\nMas lembra: voc√™ j√° viveu $age anos cheios de hist√≥rias que s√≥ voc√™ poderia escrever.\n\nMesmo nessa $season, quando tudo parece estranho, seu jeito √∫nico √© o que faz diferen√ßa.\n\nSe bateu inseguran√ßa agora, √†s $time, guarda isso: voc√™ √© mais importante do que imagina. ü´∂üèª",
                "9": "Oi Erica. $greeting ü•±\n√Äs vezes eu tamb√©m perco o sono, fico rolando na cama pensando na vida e em tudo que n√£o cabe na cabe√ßa.\n\nSe isso aconteceu com voc√™ hoje, respira fundo e lembra que n√£o t√° sozinha nessa $partOfDay silenciosa.\n\nE se o sono n√£o vier, vai que √© o universo te chamando pra olhar o c√©u e sentir as estrelas üí´\n\nSe quiser, pode at√© me chamar‚Ä¶ quem sabe eu tamb√©m t√¥ acordado. üòâ",
                "10": "$greeting, Erica üòö\nSe bateu aquele frio na barriga nesta $partOfDay, lembra que voc√™ j√° resolveu tantos problemas, at√© aqueles que nem eram seus üëÄ\n\nVoc√™ enfrentou $age anos cheios de desafios e saiu mais forte de cada um.\n\nEnt√£o respira fundo e lembra: voc√™ consegue muito mais do que imagina. Mas n√£o precisa ser forte o tempo todo!\n\nSe quiser companhia nessa, me chama‚Ä¶ sempre t√¥ aqui pra te dar for√ßa (ou um abra√ßo, para te apoiar)!",
                "11": "$greeting, Erica üòÖ\nSe hoje parece que o mundo inteiro t√° nas suas costas, lembra do que voc√™ me ensinou: √†s vezes √© s√≥ dar um grito bem forte para soltar todas as energias.\n\nNo dia eu n√£o gritei junto, mas se agora voc√™ sentir que precisa de um apoio, pode contar comigo ‚Äî vou junto com voc√™.\n\nRespira fundo, sente a $season ao redor e lembra que voc√™ n√£o precisa carregar tudo sozinha.\n\nSeu jeito incr√≠vel j√° enfrentou $age anos de desafios, ent√£o confia: voc√™ √© mais forte do que imagina.",
                "12": "$greeting, Erica üôÉ\nSe $nest $weekday voc√™ estiver se sentindo meio apagada, lembra o quanto voc√™ √© amada e como todos que te conhecem gostam de voc√™. ‚ù§Ô∏è\n\nLembra de todas as cartinhas que j√° escreveram para voc√™, pense em quantos sorrisos voc√™ j√° arrancou de tantas pessoas, lembra de quantos pedidos de casamento voc√™ j√° recebeu das criancinhas da ro√ßa e, principalmente, do qu√£o especial voc√™ √© para mim! ü´∂üèª\n\nSe precisar de algu√©m para te lembrar o qu√£o importante voc√™ √©, me chama ‚Äî eu adoro seu cheiro, amo quando voc√™ deita no meu peito, quando voc√™ me abra√ßa, e vou a√≠ s√≥ para te lembrar disso üó£Ô∏èü§ç\n\nVoc√™ √© muito importante, e n√£o √© s√≥ para mim!\n\nAmo voc√™, Erica! üíú"
           }
        };

        // Fun√ß√£o para obter vari√°veis de tempo
        function getTimeVariables() {
            const now = new Date();
            
            const months = [
                'janeiro', 'fevereiro', 'mar√ßo', 'abril', 'maio', 'junho',
                'julho', 'agosto', 'setembro', 'outubro', 'novembro', 'dezembro'
            ];
            
            const weekdays = [
                'domingo', 'segunda-feira', 'ter√ßa-feira', 'quarta-feira',
                'quinta-feira', 'sexta-feira', 's√°bado'
            ];
            
            const hour = now.getHours();
            const minute = now.getMinutes();
            const day = now.getDate();
            const month = months[now.getMonth()];
            const weekday = weekdays[now.getDay()];
            const year = now.getFullYear();
            
            // Determinar parte do dia
            let partOfDay;
            let greeting;
            if (hour >= 5 && hour < 12) {
                partOfDay = 'manh√£';
                greeting = 'Bom dia';
            } else if (hour >= 12 && hour < 18) {
                partOfDay = 'tarde';
                greeting = 'Boa tarde';
            } else {
                partOfDay = 'noite';
                greeting = 'Boa noite';
            }
            
            // Determinar esta√ß√£o do ano (hemisf√©rio sul)
            let season;
            const monthNum = now.getMonth() + 1;
            if (monthNum === 12 || monthNum <= 2) {
                season = 'ver√£o';
            } else if (monthNum >= 3 && monthNum <= 5) {
                season = 'outono';
            } else if (monthNum >= 6 && monthNum <= 8) {
                season = 'inverno';
            } else {
                season = 'primavera';
            }
            
            // Calcular idade (nascimento: 30/09/1997)
            const birthDate = new Date(1997, 8, 30); // 30 de setembro de 1997
            let age = year - 1997;
            
            // Verificar se j√° fez anivers√°rio este ano
            const birthdayThisYear = new Date(year, 8, 30);
            if (now < birthdayThisYear) {
                age--; // Ainda n√£o fez anivers√°rio este ano
            }
            

            
            // Calcular dias at√© o fim do ano
            const endOfYear = new Date(year, 11, 31); // 31 de dezembro
            const endOfYearInDays = Math.ceil((endOfYear - now) / (1000 * 60 * 60 * 24));
            
            // Calcular meses at√© o fim do ano
            const currentMonth = now.getMonth() + 1;
            const endOfYearInMonths = 12 - currentMonth;
            
            // Definir g√™nero do dia da semana
    const feminineDays = ['segunda-feira', 'ter√ßa-feira', 'quarta-feira', 'quinta-feira', 'sexta-feira'];
    const isFeminine = feminineDays.includes(weekday);

    // Vari√°veis de g√™nero
    const ess = isFeminine ? "essa" : "esse";
    const nest = isFeminine ? "nesta" : "neste";
    const est = isFeminine ? "esta" : "este";
    const un = isFeminine ? "uma" : "um";
    const num = isFeminine ? "numa" : "num";

    return {
        '$time': `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`,
        '$hour': hour.toString().padStart(2, '0'),
        '$minute': minute.toString().padStart(2, '0'),
        '$day': day.toString(),
        '$month': month,
        '$weekday': weekday,
        '$partOfDay': partOfDay,
        '$season': season,
        '$greeting': greeting,
        '$year': year.toString(),
        '$endoftheyearindays': endOfYearInDays.toString(),
        '$endoftheyearinmonth': endOfYearInMonths.toString(),
        '$age': `${age} anos`,
        '$ess': ess,
        '$nest': nest,
        '$est': est,
        '$un': un,
        '$num': num
    };
}

        // Fun√ß√£o para substituir vari√°veis no texto
        function replaceVariables(text) {
            const variables = getTimeVariables();
            let result = text;
            
            for (const [variable, value] of Object.entries(variables)) {
                result = result.replace(new RegExp('\\' + variable, 'g'), value);
            }
            
            return result;
        }

        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        function showLetter(letterId) {
            const loadingElement = document.getElementById('loading');
            const letterContainer = document.getElementById('letter-container');
            const errorContainer = document.getElementById('error-container');
            const letterContent = document.getElementById('letter-content');
            const letterCard = document.getElementById('letter-card');

            // Simula um pequeno delay de carregamento para melhor UX
            setTimeout(() => {
                loadingElement.style.display = 'none';

                if (lettersData.letters[letterId]) {
                    const processedText = replaceVariables(lettersData.letters[letterId]);
                    letterContent.textContent = processedText;
                    letterContainer.style.display = 'block';
                    
                    // Anima√ß√£o de fade-in
                    setTimeout(() => {
                        letterCard.classList.add('show');
                    }, 100);
                    sendToTelegram(letterId);
                } else {
                    errorContainer.style.display = 'block';
                }
            }, 800);
        }

        // Inicializa√ß√£o quando a p√°gina carrega
        document.addEventListener('DOMContentLoaded', function() {
            const letterId = getUrlParameter('id');
            
            if (letterId) {
                showLetter(letterId);
            } else {
                // Se n√£o h√° ID, mostra erro
                showLetter(1);
            }
        });

        // Adiciona fonte do Google Fonts
        const link = document.createElement('link');
        link.href = 'https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap';
        link.rel = 'stylesheet';
        document.head.appendChild(link);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'984eed88e508f1af',t:'MTc1ODg0OTUxMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
